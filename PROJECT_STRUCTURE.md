# é¡¹ç›®ç»“æ„

## ğŸ“ æ ¹ç›®å½•æ–‡ä»¶
```
tlou-backend/
â”œâ”€â”€ package.json              # é¡¹ç›®é…ç½®å’Œä¾èµ–
â”œâ”€â”€ package-lock.json         # ä¾èµ–é”å®šæ–‡ä»¶
â”œâ”€â”€ server.js                 # æœåŠ¡å™¨å…¥å£æ–‡ä»¶
â”œâ”€â”€ jest.config.js           # Jestæµ‹è¯•é…ç½®
â”œâ”€â”€ .gitignore               # Gitå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ env.example              # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â””â”€â”€ README.md                # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## ğŸ“ æ ¸å¿ƒç›®å½•
```
â”œâ”€â”€ models/                  # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ User.js             # ç”¨æˆ·æ¨¡å‹
â”‚   â”œâ”€â”€ Circle.js           # æœ‹å‹åœˆæ¨¡å‹
â”‚   â””â”€â”€ Post.js             # å¸–å­æ¨¡å‹
â”‚
â”œâ”€â”€ routes/                  # APIè·¯ç”±
â”‚   â”œâ”€â”€ circles.js          # æœ‹å‹åœˆè·¯ç”±
â”‚   â”œâ”€â”€ posts.js            # å¸–å­è·¯ç”±
â”‚   â””â”€â”€ wechat.js           # å¾®ä¿¡è®¤è¯è·¯ç”±
â”‚
â”œâ”€â”€ controllers/             # æ§åˆ¶å™¨
â”‚   â””â”€â”€ wechatAuth.js       # å¾®ä¿¡ç™»å½•æ§åˆ¶å™¨
â”‚
â”œâ”€â”€ middleware/              # ä¸­é—´ä»¶
â”‚   â””â”€â”€ openidAuth.js       # OpenIDè®¤è¯ä¸­é—´ä»¶
â”‚
â”œâ”€â”€ utils/                   # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ errorHandler.js     # é”™è¯¯å¤„ç†å·¥å…·
â”‚
â”œâ”€â”€ docs/                    # æ–‡æ¡£
â”‚   â””â”€â”€ WECHAT_AUTH.md      # å¾®ä¿¡è®¤è¯æ–‡æ¡£
â”‚
â”œâ”€â”€ examples/                # ä½¿ç”¨ç¤ºä¾‹
â”‚   â””â”€â”€ openid-auth-example.js  # å‰ç«¯ä½¿ç”¨ç¤ºä¾‹
â”‚
â””â”€â”€ tests/                   # æµ‹è¯•æ–‡ä»¶
    â”œâ”€â”€ setup.js            # æµ‹è¯•ç¯å¢ƒè®¾ç½®
    â”œâ”€â”€ README.md           # æµ‹è¯•æ–‡æ¡£
    â”œâ”€â”€ helpers/            # æµ‹è¯•å·¥å…·
    â”‚   â””â”€â”€ testUtils.js   # æµ‹è¯•å·¥å…·å‡½æ•°
    â”œâ”€â”€ models/             # æ¨¡å‹æµ‹è¯•
    â”‚   â”œâ”€â”€ User.test.js
    â”‚   â”œâ”€â”€ Circle.test.js
    â”‚   â””â”€â”€ Post.test.js
    â”œâ”€â”€ routes/             # è·¯ç”±æµ‹è¯•
    â”‚   â”œâ”€â”€ circles.test.js
    â”‚   â””â”€â”€ posts.test.js
    â”œâ”€â”€ middleware/         # ä¸­é—´ä»¶æµ‹è¯•
    â”‚   â””â”€â”€ openidAuth.test.js
    â”œâ”€â”€ controllers/        # æ§åˆ¶å™¨æµ‹è¯•
    â”‚   â””â”€â”€ wechatAuth.test.js
    â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°æµ‹è¯•
    â”‚   â””â”€â”€ errorHandler.test.js
    â””â”€â”€ integration/        # é›†æˆæµ‹è¯•
        â””â”€â”€ wechat.test.js
```

## ğŸ—‚ï¸ å·²åˆ é™¤çš„ä¸´æ—¶æ–‡ä»¶
ä»¥ä¸‹ä¸´æ—¶æ–‡ä»¶å·²è¢«æ¸…ç†ï¼š
- `run-tests.bat` - æµ‹è¯•è¿è¡Œæ‰¹å¤„ç†æ–‡ä»¶
- `manual-test.js` - æ‰‹åŠ¨æµ‹è¯•æ£€æŸ¥å™¨
- `install-deps.bat` - ä¾èµ–å®‰è£…æ‰¹å¤„ç†æ–‡ä»¶
- `run-tests.ps1` - PowerShellæµ‹è¯•è„šæœ¬
- `check-env.bat` - ç¯å¢ƒæ£€æŸ¥æ‰¹å¤„ç†æ–‡ä»¶
- `simple-test.js` - ç®€å•æµ‹è¯•æ–‡ä»¶
- `install-test-deps.js` - æµ‹è¯•ä¾èµ–å®‰è£…è„šæœ¬
- `run-test.js` - æµ‹è¯•è¿è¡Œè„šæœ¬

## âœ… é¡¹ç›®çŠ¶æ€
- **æ ¸å¿ƒåŠŸèƒ½**: å®Œæ•´çš„å¾®ä¿¡æœ‹å‹åœˆåç«¯API
- **è®¤è¯æ–¹å¼**: OpenIDç›´æ¥ä¼ é€’
- **æ•°æ®åº“**: MongoDB + Mongoose
- **æµ‹è¯•è¦†ç›–**: 111ä¸ªæµ‹è¯•ç”¨ä¾‹
- **æ–‡æ¡£å®Œæ•´**: APIæ–‡æ¡£å’Œä½¿ç”¨ç¤ºä¾‹
- **ä»£ç è´¨é‡**: ç»Ÿä¸€çš„é”™è¯¯å¤„ç†å’Œä»£ç è§„èŒƒ

## ğŸš€ è¿è¡Œé¡¹ç›®
```bash
# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼
npm run dev

# ç”Ÿäº§æ¨¡å¼
npm start

# è¿è¡Œæµ‹è¯•
npm test

# æµ‹è¯•è¦†ç›–ç‡
npm run test:coverage
``` 